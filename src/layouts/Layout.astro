---
import Navigation from '../components/Navigation.astro';
import '../styles/global.css';
import Footer from '../components/Footer.astro';

const {
  title = "Lazebna",
  description = "My website description",
  image = "/image 2.png",
  url = "https://lazebna.vercel.app",
} = Astro.props; 

// Astro.site comes from astro.config.mjs
const site = Astro.site;
const absoluteImageUrl = new URL(image, site).href;
---

<!doctype html>
<html lang="en">
	<head>
		<title>{title}</title>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/Favicon dark.svg" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet" />
		<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap" rel="stylesheet" />
		<meta name="generator" content={Astro.generator} />

		<!-- Open Graph -->
    	<meta property="og:type" content="website" />
    	<meta property="og:title" content={title} />
    	<meta property="og:description" content={description} />
    	<meta property="og:image" content={absoluteImageUrl} />
    	<meta property="og:url" content={site} />

    	<!-- Twitter -->
    	<meta name="twitter:card" content="summary_large_image" />
    	<meta name="twitter:image" content={absoluteImageUrl} />

	</head>
	<body class="bg-black">
		<Navigation />
		<slot />
		<Footer />
			

		<script>
			// Smooth Scroll Implementation
			
  			const slowScrollTo = (targetElement: HTMLElement, duration: number) => {

    			const targetPosition = targetElement.getBoundingClientRect().top + window.pageYOffset;
    			const startPosition = window.pageYOffset;
    			const distance = targetPosition - startPosition - 200; // -200 for navbar offset
    			let startTime: number | null = null;

    			// Easing function: "easeInOutQuad"
    			const ease = (t: number, b: number, c: number, d: number) => {
      			t /= d / 2;
      			if (t < 1) return (c / 2) * t * t + b;
      			t--;
      			return (-c / 2) * (t * (t - 2) - 1) + b;
    			};

    			const animation = (currentTime: number) => {
      				if (startTime === null) startTime = currentTime;
      				const timeElapsed = currentTime - startTime;
      				const run = ease(timeElapsed, startPosition, distance, duration);
      				window.scrollTo(0, run);
      				if (timeElapsed < duration) requestAnimationFrame(animation);
    			};

    		requestAnimationFrame(animation);
  			};

  			const initSlowScroll = () => {
				
    			const links = document.querySelectorAll<HTMLAnchorElement>('a[href^="#"]');

    			links.forEach(link => {

      				link.addEventListener('click', (e) => {
        				e.preventDefault();
        				const id = link.getAttribute('href');
        				if (!id || id === '#') return;

        				const target = document.querySelector<HTMLElement>(id);
        				if (target) {
          				// ADJUST SPEED HERE: 1500 is 1.5 seconds
          				slowScrollTo(target, 1500);
          
          				// Update URL hash
          				history.pushState(null, '', id);
        				}
      				});
    			});
  			};

  			initSlowScroll();
  			document.addEventListener('astro:after-swap', initSlowScroll);

			// End Smooth Scroll Implementation
		</script>

	</body>
</html>



<style>
	html,
	body {
		margin: 0;
		width: 100%;
		height: 100%;
	}
</style>
