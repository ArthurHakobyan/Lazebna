---
import { Image } from "astro:assets";
import whiteIcon from "../assets/Property 1=Default.svg";
import orangeIcon from "../assets/Property 1=Variant2.svg";
import Button from './UI/Button.astro';
import barber1 from '../assets/barber1.jpg';
import barber2 from '../assets/barber2.jpg';
import barber3 from '../assets/barber3.avif';

/* Initial state: Martin's data is rendered by default 
  so the page looks correct on the first load (SEO friendly).
*/
const initialBarber = {
  slogan: "Pro mě je barbering kombinací řemesla, detailu a respektu k tomu, kdo zrovna sedí v křesle. Přijď si pro střih, který tě nebude definovat — jen podtrhne to, kým už jsi.",
  film: "FIGHT CLUB",
  album: "GOOD KID, M.A.A.D. CITY",
  cut: "TAPER FADE"
};
---

<section>
    
    <div class="max-w-7xl mx-auto text-white p-4">
        <h2 class="font-rockiest font-[1000] text-orange text-[48px] uppercase">Náš tým</h2>
        <div class="lg:flex">
            <div class="flex lg:w-[50%]">
                <div class="w-[30%] text-[36px] text-grey">
                    <ul id="barber-list">
                        <li class="barber-trigger cursor-pointer text-white transition-colors" data-name="martin">Martin</li>
                        <li class="barber-trigger cursor-pointer hover:text-white transition-colors" data-name="artur">Artur</li>
                        <li class="barber-trigger cursor-pointer hover:text-white transition-colors" data-name="david">David</li>
                    </ul>
                </div>
                <div class="lg:w-[416px] lg:h-[510px] w-[250px] h-[306px] overflow-hidden border-white rounded-xl shadow-[2px_4px_4px_rgba(63,63,63,0.32)]">
                    <Image 
                    id="barber-img" 
                    src={barber1} 
                    alt="Barber"
                    width={416}
                    height={510} 
                    class="w-full h-full object-cover transition-opacity duration-300" />
                </div>
            </div>
    
            <div class="flex flex-col justify-between lg:w-[50%] p-4">
                <div>
                    <p id="barber-slogan" class="lg:w-[80%] text-lg lg:text-[24px] leading-relaxed transition-opacity duration-300 pb-6">
                        {initialBarber.slogan}
                    </p>
                </div>
                <div class="flex justify-between text-sm lg:text-[19px] tracking-[17%] lg:pb-[128px] lg:pr-[100px] text-grey">
                    <ul>
                        <li>FAVORITE FILM</li>
                        <li>FAVORITE ALBUM</li>
                        <li>FAVORITE CUT</li>
                    </ul>
                    <ul class="text-right text-grey">
                        <li id="barber-film" class="transition-opacity">{initialBarber.film}</li>
                        <li id="barber-album" class="transition-opacity">{initialBarber.album}</li>
                        <li id="barber-cut" class="transition-opacity">{initialBarber.cut}</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="hidden lg:block relative h-[185px]">
            <div class="group relative mx-auto w-[185px] h-[185px] mt-[-60px] cursor-pointer transition-transform duration-500 ease-in-out hover:rotate-45">
                <a href="https://lazebna.reservio.com/">
                    <Image 
                    src={whiteIcon} 
                    alt="Book now"
                    class="absolute inset-0 w-full h-full transition-opacity duration-500 opacity-100 group-hover:opacity-0"
                />

                <Image 
                    src={orangeIcon} 
                    alt="Book now"
                    class="absolute inset-0 w-full h-full -rotate-45  transition-opacity duration-500 opacity-0 group-hover:opacity-100"
                />
                </a>
            </div>
        </div>
        <div class="lg:hidden my-4  mx-auto w-max">
            <Button href="https://lazebna.reservio.com/" title="BOOK NOW" />
        </div>
    </div>

</section>

<script>
    // Data is kept here in the script bundle, not in HTML attributes
    const barberData = {
        martin: {
            slogan: "Pro mě je barbering kombinací řemesla, detailu a respektu k tomu, kdo zrovna sedí v křesle. Přijď si pro střih, který tě nebude definovat — jen podtrhne to, kým už jsi.",
            film: "FIGHT CLUB",
            album: "GOOD KID, M.A.A.D. CITY",
            cut: "TAPER FADE",
            img: "/src/assets/barber1.jpg"
        },
        artur: {
            slogan: "Detail a preciznost jsou pro mě základem. Každý pohyb břitvou musí být promyšlený, aby výsledek odpovídal vaší osobnosti a životnímu stylu.",
            film: "PULP FICTION",
            album: "THE EMINEM SHOW",
            cut: "BUZZ CUT",
            img: "/src/assets/barber2.avif"
        },
        david: {
            slogan: "Klasické techniky s moderním přístupem. Věřím, že barbering je o budování komunity a o tom, aby se člověk v křesle cítil uvolněně.",
            film: "THE GODFATHER",
            album: "DARK SIDE OF THE MOON",
            cut: "SIDE PART",
            img: "/src/assets/barber3.avif"
        }
    };

    // Selecting elements
    const triggers = document.querySelectorAll('.barber-trigger');
    const sloganEl = document.getElementById('barber-slogan');
    const filmEl = document.getElementById('barber-film');
    const albumEl = document.getElementById('barber-album');
    const cutEl = document.getElementById('barber-cut');
    const imgEl = document.getElementById('barber-img') as HTMLImageElement;

    triggers.forEach(trigger => {
        trigger.addEventListener('click', () => {
            const name = trigger.getAttribute('data-name');

            // TypeScript check: ensures name is a valid key of our data object
            if (name && name in barberData) {
                const data = barberData[name as keyof typeof barberData];

                // 1. Update active state styles
                triggers.forEach(t => {
                    t.classList.remove('text-white');
                    t.classList.add('text-grey');
                });
                trigger.classList.add('text-white');
                trigger.classList.remove('text-grey');

                // 2. Update Content (with simple check for null)
                if (sloganEl) sloganEl.textContent = data.slogan;
                if (filmEl) filmEl.textContent = data.film;
                if (albumEl) albumEl.textContent = data.album;
                if (cutEl) cutEl.textContent = data.cut;
                if (imgEl) imgEl.src = data.img;
            }
        });
    });
</script>

