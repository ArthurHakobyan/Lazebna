---
import { Image } from 'astro:assets';
import faqIcon from '../../assets/Plus.svg';

interface Props {
  question: string;
  answer: string;
}
const { question, answer } = Astro.props;
---

<div class="faq-container lg:w-[852px] bg-white/5 border border-white/10 rounded-xl shadow-[2px_4px_4px_rgba(63,63,63,0.32)] text-white mx-auto overflow-hidden my-6">
  
  <button class="faq-trigger flex items-center justify-between w-full p-4 cursor-pointer focus:outline-none">
    <h3 class="text-left font-normal lg:text-[24px] text-[20px]">{question}</h3>
    <Image 
      src={faqIcon} 
      alt="FAQ Icon" 
      class="faq-icon transform transition-transform duration-500" 
    />
  </button>

  <div class="faq-content grid grid-rows-[0fr] transition-[grid-template-rows] duration-500 ease-[cubic-bezier(0.68,-0.55,0.27,1.55)]">
    <div class="overflow-hidden">
      <div class="p-4 pt-0 text-white">
        <p class="lg:w-[80%] lg:text-[20px] whitespace-pre-line">{answer}</p>
      </div>
    </div>
  </div>
</div>

<style>
  /* State when open */
  .faq-container.is-open .faq-content {
    grid-template-rows: 1fr;
  }
  .faq-container.is-open .faq-icon {
    transform: rotate(45deg);
  }
</style>

<script>
  function initFaq() {
    const containers = document.querySelectorAll('.faq-container');
    
    containers.forEach(container => {
      const trigger = container.querySelector('.faq-trigger');
      
      trigger?.addEventListener('click', () => {
        // Toggle the current one
        container.classList.toggle('is-open');
      });
    });
  }

  // Runs on initial load
  initFaq();

  // If you use Astro View Transitions, re-run the script on page navigation
  document.addEventListener('astro:page-load', initFaq);
</script>