---
import ServicesCard from '../components/UI/ServicesCard.astro';

const services = [
  {
    name: 'Klasický střih',
    description: `Klasický střih s čistými konturami a přirozeným tvarem hlavy. Jednoduchý, fresh look, který sedí vždy a všude.`,  
    price: '600',
  }, 
  {
    name: 'Střih & Vousy',
    description: `Kompletní střih pro delší vlasy s precizní úpravou vousů. 
    Více práce a detailů pro perfektně sladěný, čistý a stylový look.`,
    price: '900',
  }, 
  {
    name: 'Trim & Vousy',
    description: `Střih strojkem s upravenými vousy. 
    Čistý a upravený look, který drží tvar a zvýrazní tvůj profil.`,
    price: '800',
  },
  
  {
    name: 'Vousy',
    description: `Precizní tvarování a úprava vousů podle tvého stylu. 
    Čistý, upravený look, který zvýrazní tvůj profil a charakter.`,
    price: '400',
  },
  {
    name: 'Úprava boků',
    description: `Úprava boků s důrazem na perfektní fade. 
    Čistý, upravený vzhled, který ponechává vršek nedotčený.`,
    price: '400',
  },
    
  ]                                                                           
---

<section class="pb-100" id="services">
    <h2 class="font-rokiest font-[1000] text-orange text-[48px] uppercase text-center pb-10">Naše služby</h2>
    <div id="services-container" class=" flex overflow-x-auto pb-10 px-[5%] cursor-grab active:cursor-grabbing hide-scrollbar snap-x snap-mandatory gap-6">
        {services.map(service => (
            <ServicesCard 
                title={service.name} 
                description={service.description} 
                price={service.price} 
                
            />
        ))}
    </div>
</section>

<style>
  /* Hides scrollbar for Chrome, Safari and Opera */
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* Hides scrollbar for IE, Edge and Firefox */
  .hide-scrollbar {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }
</style>

<script>
  // Select the slider container
  const slider = document.getElementById('services-container') as HTMLElement | null;

  if (slider) {
    let isDown = false;
    let startX: number;
    let scrollLeft: number;

    slider.addEventListener('mousedown', (e: MouseEvent) => {
      isDown = true;
      slider.classList.replace('cursor-grab', 'cursor-grabbing');
      
      // Calculate start position
      startX = e.pageX - slider.offsetLeft;
      scrollLeft = slider.scrollLeft;
      
      // Prevent text selection while dragging
      slider.style.userSelect = 'none';
      slider.style.scrollSnapType = 'none'; // Temporarily disable snapping for smooth drag
    });

    slider.addEventListener('mouseleave', () => {
      isDown = false;
      slider.classList.replace('cursor-grabbing', 'cursor-grab');
    });

    slider.addEventListener('mouseup', () => {
      isDown = false;
      slider.classList.replace('cursor-grabbing', 'cursor-grab');
      slider.style.scrollSnapType = 'x mandatory'; // Re-enable snapping
    });

    slider.addEventListener('mousemove', (e: MouseEvent) => {
      if (!isDown) return;
      e.preventDefault();
      
      const x = e.pageX - slider.offsetLeft;
      const walk = (x - startX) * 2; // Adjust scroll speed (2 is a good baseline)
      slider.scrollLeft = scrollLeft - walk;
    });
  }
</script>